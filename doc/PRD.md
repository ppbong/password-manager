# 项目需求文档（Project Requirement Document）

## 1. 项目概述

本项目是一个基于Electron + Vue的桌面应用，用于管理用户的平台口令，提供用户注册、登录、信息管理、根口令设置、平台分类管理、平台口令管理等功能。

## 2. 功能要求

### 2.1 用户管理

#### 2.1.1 用户注册
- **功能描述**：允许用户创建新账号
- **输入字段**：用户名、口令、姓名、邮箱、手机、留存信息
- **业务逻辑**：
  - 关联用户ID
  - 口令加密存储
  - 检查用户名唯一性
  - 初始化注册admin/admin123用户

#### 2.1.2 用户登录
- **功能描述**：允许用户登录系统
- **输入字段**：用户名、口令
- **业务逻辑**：
  - 关联用户ID
  - 口令验证
  - 维护登录状态

#### 2.1.3 用户信息查看
- **功能描述**：允许用户查看个人信息
- **显示字段**：用户名、姓名、邮箱、手机、留存信息、根口令状态、平台口令数量、注册时间
- **业务逻辑**：
  - 关联用户ID
  - 支持信息修改和口令修改

#### 2.1.4 用户信息修改
- **功能描述**：允许用户修改个人信息
- **输入字段**：姓名、邮箱、电话、留存信息
- **业务逻辑**：
  - 关联用户ID
  - 信息更新

#### 2.1.5 用户口令修改
- **功能描述**：允许用户修改登录口令
- **输入字段**：旧口令、新口令
- **业务逻辑**：
  - 关联用户ID
  - 旧口令验证
  - 新口令加密后更新

### 2.2 根口令管理

#### 2.2.1 根口令设置
- **功能描述**：允许用户设置根口令
- **输入字段**：根口令、根口令提示
- **业务逻辑**：
  - 关联用户ID
  - 根口令加密存储
  - 用根口令派生AES密钥
  - 生成RSA密钥对
  - 用AES密钥加密RSA私钥

#### 2.2.2 根口令修改
- **功能描述**：允许用户修改根口令
- **输入字段**：旧根口令、新根口令
- **业务逻辑**：
  - 关联用户ID
  - 旧根口令验证
  - 用旧根口令派生旧AES密钥
  - 用新根口令派生新AES密钥
  - 用旧AES密钥解密RSA私钥后用新AES密钥加密

### 2.3 平台分类管理

#### 2.3.1 平台分类创建
- **功能描述**：允许用户创建平台分类
- **输入字段**：代码、名称、描述
- **业务逻辑**：
  - 关联分类ID
  - 初始化银行、邮箱、网站、应用、其他5个分类信息
  - 检查代码唯一性且名称唯一性

#### 2.3.2 平台分类查看
- **功能描述**：允许用户查看平台分类
- **显示字段**：代码、名称、描述
- **业务逻辑**：
  - 关联分类ID
  - 支持拖拽改变分类排序顺序
  - 支持创建、修改、删除操作

#### 2.3.3 平台分类修改
- **功能描述**：允许用户修改平台分类
- **输入字段**：代码、名称、描述
- **业务逻辑**：
  - 关联分类ID
  - 检查代码唯一性且名称唯一性

#### 2.3.4 平台分类删除
- **功能描述**：允许用户删除平台分类
- **业务逻辑**：
  - 若平台口令中有关联记录则不允许删除

### 2.4 平台口令管理

#### 2.4.1 平台口令创建
- **功能描述**：允许用户创建平台口令
- **输入字段**：平台分类、平台名称、平台账号、平台口令、关联邮箱、关联手机、保密信息、备注
- **业务逻辑**：
  - 关联用户ID
  - 关联分类ID
  - 平台口令用RSA公钥加密
  - 保密信息用RSA公钥加密
  - 创建前检查根口令状态
  - 提供自动生成口令按钮

#### 2.4.2 平台口令查看
- **功能描述**：允许用户查看平台口令列表
- **显示字段**：平台分类、平台名称、平台账号、关联邮箱、关联手机、备注、创建时间、更新时间
- **业务逻辑**：
  - 关联用户ID
  - 关联分类ID
  - 支持创建、修改、删除、详情、历史操作

#### 2.4.3 平台口令修改
- **功能描述**：允许用户修改平台口令
- **输入字段**：平台分类、平台名称、平台账号、平台口令、关联邮箱、关联手机、保密信息、备注
- **业务逻辑**：
  - 关联用户ID
  - 关联分类ID
  - 须输入并验证根口令后才能修改
  - 提供自动生成口令按钮

#### 2.4.4 平台口令删除
- **功能描述**：允许用户删除平台口令
- **业务逻辑**：
  - 须输入并验证根口令后才能删除

#### 2.4.5 平台口令详情
- **功能描述**：允许用户查看平台口令详情
- **显示字段**：平台分类、平台名称、平台账号、平台口令、关联邮箱、关联手机、保密信息、备注、创建时间、更新时间
- **业务逻辑**：
  - 关联用户ID
  - 关联分类ID
  - 须输入并验证根口令后才能查看详情
  - 根口令派生AES密钥
  - 用AES密钥解密RSA私钥
  - 用RSA私钥分别解密平台口令和保密信息

#### 2.4.6 平台口令历史
- **功能描述**：允许用户查看平台口令操作历史
- **显示字段**：平台分类、平台名称、平台账号、关联邮箱、关联手机、备注、操作类型、操作时间
- **业务逻辑**：
  - 关联用户ID
  - 关联分类ID
  - 支持详情操作
  - 操作类型为新增、修改、删除

#### 2.4.7 平台口令历史详情
- **功能描述**：允许用户查看平台口令历史详情
- **显示字段**：平台分类、平台名称、平台账号、平台口令、关联邮箱、关联手机、保密信息、备注、操作类型、操作时间
- **业务逻辑**：
  - 关联用户ID
  - 关联分类ID
  - 须输入并验证根口令后才能查看详情
  - 根口令派生AES密钥
  - 用AES密钥解密RSA私钥
  - 用RSA私钥分别解密平台口令和保密信息

#### 2.4.8 平台口令自动生成
- **功能描述**：允许用户自动生成平台口令
- **输入选项**：是否含数字、是否含小写字母、是否含大写字母、是否含特殊字符
- **业务逻辑**：
  - 根据设置自动生成临时平台口令
  - 检查并反馈口令强度

### 2.5 数据管理

#### 2.5.1 数据查看
- **功能描述**：允许admin用户查看数据操作日志
- **显示字段**：操作时间、操作类型、文件名称、操作人
- **业务逻辑**：
  - 支持备份、恢复操作
  - 仅admin用户可操作

#### 2.5.2 数据备份
- **功能描述**：允许admin用户备份数据库
- **业务逻辑**：
  - 数据库表全量备份（含表结构、表数据、表索引等）
  - 仅admin用户可操作

#### 2.5.3 数据恢复
- **功能描述**：允许admin用户恢复数据库
- **业务逻辑**：
  - 数据库表全量恢复（含表结构、表数据、表索引等）
  - 仅admin用户可操作

## 3. 技术要求

### 3.1 框架和库

- **主进程**：electron + better-sqlite3 + bcryptjs + crypto-js
- **渲染进程**：vue + element-plus + @element-plus/icons-vue + vue-router@4 + pinia
- **类型检查**：typescript
- **编译工具**：vite + vite-plugin-electron
- **打包工具**：electron-builder

### 3.2 安全要求

- 所有口令必须加密存储
- 根口令用于派生AES密钥
- RSA密钥对用于加密平台口令和保密信息
- AES密钥用于加密RSA私钥

## 4. 界面设计原则

- 简洁明了
- 操作便捷
- 安全性高
- 响应式设计

## 5. 性能要求

- 启动时间：≤5秒
- 响应时间：≤1秒
- 内存占用：≤200MB

## 6. 兼容性要求

- Windows 10/11
- macOS 10.15+
- Linux (Ubuntu 20.04+)
